<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.mapper.music-mapper">
	<select id="musicListData" resultType="MusicVO" parameterType="hashmap">
	  SELECT no,title,poster,num 
      FROM (SELECT no,title,poster,rownum as num
      FROM (SELECT no,title,poster 
      FROM genie_music ORDER BY no))
      WHERE num BETWEEN #{start} AND #{end}
	</select>
	  <!-- 총페이지 -->
	  <select id="musicTotalPage" resultType="int">
	    SELECT CEIL(COUNT(*)/12.0) 
	    FROM genie_music
	  </select>

	    <select id="musicDetailData" resultType="MusicVO" 
		  parameterType="int">
		   SELECT * FROM genie_music
		   WHERE no=#{no}
		 </select>
		   <!-- 음악 종류별  -->
	  <select id="musicTypeListData" resultType="MusicVO"
	   parameterType="hashmap"
	  >
	    SELECT no,title,poster,cno
	    FROM genie_music
	    WHERE cno LIKE '%'||#{cno}||'%'
	    ORDER BY no ASC
	    OFFSET #{start} ROWS FETCH NEXT 12 ROWS ONLY
	    <!-- 
	       MySQL : LIMIT start,12
	       oracle : Inline View
	     -->
	  </select>
  <!-- 
  		name
  		subject
  		content
  		
  		name+subject
  		name+content
  		name+subject+content
  		subject+content
   -->
  <select id="musicTypeTotalPage" resultType="int"
   parameterType="int"
  >
  	SELECT CEIL(COUNT(*)/12.0)
  	FROM genie_music
  	WHERE cno LIKE '%'||#{cno}||'%'
  	
  	<!-- 
  		 MySQL : WHERE type LIKE CONCAT('%',#{type},'%')
  		 NVL = IFNULL , TO_CHAR = DATE_FORMAT
  	 -->
  	 
  </select>
    <select id="musicFindListData" resultType="MusicVO"
    parameterType="hashmap"
  >
    SELECT no,title,singer,poster,album
    FROM genie_music
    WHERE ${column} LIKE '%'||#{ss}||'%'

  </select>
</mapper>